# Задание 
*	Добавить возможность сохранения нового объекта обеспечения - самолет (таблица AIRPLANE). При внесении изменений следует предусмотреть возможность добавления новых видов объектов обеспечения.
*	Добавить возможность получения информации о сохраненных самолетах (аналогично тому как это реализовано с автомобилями)
*	Добавить возможность добавлять ко всем объектам обеспечения стоимостные оценки. Для одного объекта обеспечения может быть несколько стоимостных оценок. Стоимостная оценка представляет собой некоторую сумму и время когда эта оценка проводилась. Все оценки должны храниться в БД. При передаче в ExternalApproveService должна использоваться последняя по дате стоимостная оценка для объекта.
Сейчас есть некоторая реализация стоимостной оценки для автомобилей: сумма хранится в таблице CAR вместе с остальными данными, а дата берется текущая. Нужно провести рефакторинг и так же вынести оценки для автомобилей в новую таблицу.
# Пояснения
*	Перед сохранением все объекты обеспечения должны быть проверены через ExternalApproveService (как в коде сейчас происходит для автомобилей)

# Комментарии от исполнителя

Для того, чтобы избавиться от многочисленных проверок instanceOf, понижений типов и "разбухания" класса CollateralService при добавления новых объектов обеспечения
 был, осуществлен рефакторинг кода с использованием паттерна Visitor. Повторяющийся код был частично убран, с помощью полиморфизма.
 
 
Для тестирования программы были написаны JUnit тесты.


______

1. При добавлении нового объекта запросом ```POST /collateral/save``` параметр id в теле запроса не должен быть указан. Новый объект каждый раз создатеся с новым id:


```json
{
  "type": "car",
  "brand": "bmv",
  "model": "2",
  "power": 22,
  "year": 5444,
  "value": 13000000,
  "date": "2020-10-27"
}
```

```json
{
  "type": "airPlane",
  "brand": "boeing",
  "model": "222",
  "manufacturer": "dsf",
  "year": 2332,
  "fuelCapacity": 123,
  "seats": 55,
  "value": 1542333333333,
  "date": "2021-10-27"
}
```

2. Для получения информации о объекте обеспечения используется запрос следующего вида:


**```POST /collateral/info```**
```json
{
  "type":"airPlane",
  "id":1
}
```

В качестве ответа из базы данных будет возвращаться объект(id=1) с самой последней по дате оценочной стоимостью. 

3. Для добавления оценки или обновлении данных у уже существующего в базе данных объекта обеспечения используется запрос
 с указанием id следующего вида:
 

**```PUT /collateral/save```**
```json
{
  "type": "car",
  "id": 1,
  "brand": "bmv",
  "model": "2",
  "power": 22,
  "year": 5444,
  "value": 143000000,
  "date": "2022-22-21"
}
```


Для объекта с id=1 и типом "car", сохраненного в базе данных будет создана и добавлена ещё одна оценочная стоимость с новой датой.